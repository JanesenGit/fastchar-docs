import{createRequire as f}from"node:module";import{tex as d}from"@mdit/plugin-tex";import v from"upath";const e=f(import.meta.url),i=t=>{try{const{AllPackages:a}=e("mathjax-full/js/input/tex/AllPackages.js"),{TeX:l}=e("mathjax-full/js/input/tex.js"),{CHTML:n}=e("mathjax-full/js/output/chtml.js"),{SVG:s}=e("mathjax-full/js/output/svg.js");return{InputJax:new l({packages:a,...t.tex}),OutputJax:t.output==="chtml"?new n({fontURL:v.dirname(e.resolve("mathjax-full/es5/output/chtml/fonts/woff-v2/MathJax_Zero.woff")),adaptiveCSS:!0,...t.chtml}):new s({fontCache:"none",...t.svg}),enableAssistiveMml:t.a11y!==!1}}catch{return console.error('[@mdit/mathjax] "mathjax-full" is not installed!'),null}},S=(t={})=>{const a=i(t);if(!a)return null;const{OutputJax:l,InputJax:n}=a,{CHTML:s}=e("mathjax-full/js/output/chtml.js"),o=e("mathjax-full/js/adaptors/liteAdaptor.js").liteAdaptor(),c=e("mathjax-full/js/handlers/html.js").RegisterHTMLHandler,j=e("mathjax-full/js/a11y/assistive-mml.js").AssistiveMmlHandler,{mathjax:r}=e("mathjax-full/js/mathjax.js"),h=c(o);t.a11y!==!1&&j(h);const m=()=>{l instanceof s&&l.clearCache()},u=()=>{n.reset()},p=()=>{const x=o.innerHTML(l.styleSheet(r.document("",a)));return m(),x};return{adaptor:o,documentOptions:a,allowInlineWithSpace:t.allowInlineWithSpace??!1,mathFence:t.mathFence??!1,clearStyle:m,reset:u,outputStyle:p,vPre:t.vPre??!1}},w=(t,a)=>{const{mathjax:l}=e("mathjax-full/js/mathjax.js"),{allowInlineWithSpace:n,adaptor:s,documentOptions:o,mathFence:c,vPre:j}=a;t.use(d,{allowInlineWithSpace:n,mathFence:c,render:(r,h)=>{const m=l.document(r,o).convert(r,{display:h}),u=s.outerHTML(m);return j?u.replace(/^<mjx-container/,"<mjx-container v-pre"):u}})};export{S as createMathjaxInstance,i as getDocumentOptions,w as mathjax};
//# sourceMappingURL=index.mjs.map
