"use strict";const u=(i,r)=>{i.attrs=(i.attrs||[]).filter(([c])=>c!==r)},d=i=>{const r=i.attrs?.find(([c])=>c==="title")?.[1];return r?(u(i,"title"),r):i.content},k=(i,r={})=>{const c=n=>{for(let t=1,{length:o}=n.tokens;t<o-1;t++){const e=n.tokens[t];if(e.type!=="inline"||!e.children||e.children.length!==1&&e.children.length!==3||e.children.length===1&&e.children[0].type!=="image")continue;if(e.children.length===3){const[g,f,a]=e.children;if(g.type!=="link_open"||f.type!=="image"||a.type!=="link_close")continue}if(t!==0&&n.tokens[t-1].type!=="paragraph_open"||t!==o-1&&n.tokens[t+1].type!=="paragraph_close")continue;const l=n.tokens[t-1];l.type="figure_open",l.tag="figure",n.tokens[t+1].type="figure_close",n.tokens[t+1].tag="figure";const s=e.children.length===1?e.children[0]:e.children[1],h=d(s),[p]=i.parseInline(h,n.env);e.children.push(new n.Token("figcaption_open","figcaption",1)),e.children.push(...p.children||[]),e.children.push(new n.Token("figcaption_close","figcaption",-1)),r.focusable!==!1&&s.attrPush(["tabindex","0"])}};i.core.ruler.before("linkify","figure",c)};exports.figure=k;
//# sourceMappingURL=index.cjs.map
