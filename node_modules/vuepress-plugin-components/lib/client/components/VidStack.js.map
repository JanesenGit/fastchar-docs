{"version":3,"file":"VidStack.js","sources":["../../../src/client/components/VidStack.ts"],"sourcesContent":["import { isPlainObject } from \"@vuepress/helper/client\";\nimport type { PropType, VNode } from \"vue\";\nimport { defineComponent, h, onMounted } from \"vue\";\n\nimport { getLink } from \"../utils/getLink.js\";\n\nimport \"vidstack/player/styles/default/theme.css\";\nimport \"vidstack/player/styles/default/layouts/audio.css\";\nimport \"vidstack/player/styles/default/layouts/video.css\";\nimport \"../styles/vidstack.scss\";\n\nexport interface VidStackSource {\n  src: string;\n  type: string;\n  size: string | number;\n}\n\nexport interface VidStackTrack {\n  /**\n   * Track source URL.\n   */\n  src: string;\n\n  /**\n   * The language of the text track data. It must be a valid BCP 47 language tag.\n   */\n  srclang: string;\n\n  /**\n   * If true, this track will be enabled by default.\n   *\n   * @default false\n   */\n  default?: boolean;\n\n  /**\n   * A string which uniquely identifies the track within the media.\n   */\n  id?: string;\n\n  /**\n   * A human-readable label for the track, or an empty string if unknown.\n   *\n   * @default ''\n   */\n  label?: string;\n\n  /**\n   * A string specifying the category into which the track falls. For example, the main audio\n   * track would have a kind of \"main\".\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/AudioTrack/kind}\n   */\n  kind: string;\n}\n\nexport default defineComponent({\n  name: \"VidStack\",\n\n  props: {\n    /**\n     * VidStack sources\n     */\n    sources: {\n      type: Array as PropType<(VidStackSource | string)[]>,\n      default: () => [],\n    },\n\n    /**\n     * VidStack tracks\n     */\n    tracks: { type: Array as PropType<VidStackTrack[]>, default: () => [] },\n  },\n\n  setup(props, { attrs }) {\n    onMounted(async () => {\n      await Promise.all([\n        import(/* webpackChunkName: \"vidstack\" */ \"vidstack/player\"),\n        import(/* webpackChunkName: \"vidstack\" */ \"vidstack/player/layouts\"),\n        import(/* webpackChunkName: \"vidstack\" */ \"vidstack/player/ui\"),\n      ]);\n    });\n\n    return (): VNode =>\n      h(\"media-player\", attrs, [\n        h(\"media-provider\", [\n          attrs[\"poster\"]\n            ? h(\"media-poster\", {\n                class: \"vds-poster\",\n                alt: attrs[\"alt\"] || attrs[\"title\"],\n              })\n            : null,\n          props.sources.map((source) =>\n            isPlainObject(source)\n              ? h(\"source\", { ...source, src: getLink(source.src) })\n              : h(\"source\", { src: getLink(source) }),\n          ),\n          props.tracks.map((tracks) => h(\"track\", tracks)),\n        ]),\n        h(\"media-audio-layout\"),\n        h(\"media-video-layout\", attrs),\n      ]);\n  },\n});\n"],"names":["defineComponent","props","attrs","onMounted","h","source","isPlainObject","getLink","tracks"],"mappings":"0XAwDA,IAAeA,EAAAA,EAAgB,CAC7B,KAAM,WAEN,MAAO,CAIL,QAAS,CACP,KAAM,MACN,QAAS,IAAM,CACjB,CAAA,EAKA,OAAQ,CAAE,KAAM,MAAoC,QAAS,IAAM,CAAA,CAAG,CACxE,EAEA,MAAMC,EAAO,CAAE,MAAAC,CAAM,EAAG,CACtB,OAAAC,EAAU,SAAY,CACpB,MAAM,QAAQ,IAAI,CAChB,OAA0C,iBAAiB,EAC3D,OAA0C,yBAAyB,EACnE,OAA0C,oBAAoB,CAChE,CAAC,CACH,CAAC,EAEM,IACLC,EAAE,eAAgBF,EAAO,CACvBE,EAAE,iBAAkB,CAClBF,EAAM,OACFE,EAAE,eAAgB,CAChB,MAAO,aACP,IAAKF,EAAM,KAAUA,EAAM,KAC7B,CAAC,EACD,KACJD,EAAM,QAAQ,IAAKI,GACjBC,EAAcD,CAAM,EAChBD,EAAE,SAAU,CAAE,GAAGC,EAAQ,IAAKE,EAAQF,EAAO,GAAG,CAAE,CAAC,EACnDD,EAAE,SAAU,CAAE,IAAKG,EAAQF,CAAM,CAAE,CAAC,CAC1C,EACAJ,EAAM,OAAO,IAAKO,GAAWJ,EAAE,QAASI,CAAM,CAAC,CACjD,CAAC,EACDJ,EAAE,oBAAoB,EACtBA,EAAE,qBAAsBF,CAAK,CAC/B,CAAC,CACL,CACF,CAAC"}