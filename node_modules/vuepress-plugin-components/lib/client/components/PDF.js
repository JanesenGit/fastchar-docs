import{isDef as w,isString as v,ensureEndingSlash as b,entries as S,useLocaleConfig as L}from"@vuepress/helper/client";import{defineComponent as y,onMounted as P,h as D}from"vue";import"../styles/pdf.scss";import{withBase as F}from"vuepress/client";import{checkIsiPad as T,checkIsMobile as C,checkIsSafari as R}from"vuepress-shared/client";import{u as $}from"../size-DYAeJ0VE.js";import{g as I}from"../getLink-DBmDl_2w.js";import"@vueuse/core";const p=e=>{console.error(`[PDF]: ${e}`)},U=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)},M=e=>e==="string"?document.querySelector(e):e instanceof HTMLElement?e:document.body,N=e=>{let t="";return e&&(t+=S(e).map(([o,n])=>o==="noToolbar"?`toolbar=${n?0:1}`:`${encodeURIComponent(o)}=${encodeURIComponent(n)}`).join("&"),t&&(t=`#${t.slice(0,t.length-1)}`)),t},u=(e,t,o,n,i)=>{U(t);const a=`${e==="pdfjs"?`${b(F(PDFJS_URL))}web/viewer.html?file=${encodeURIComponent(o)}`:o}${N(n)}`,s=e==="pdfjs"||e==="iframe"?"iframe":"embed",r=document.createElement(s);return r.className="pdf-viewer",r.type="application/pdf",r.title=i,r.src=a,r instanceof HTMLIFrameElement&&(r.allow="fullscreen"),t.classList.add("pdf-viewer-container"),t.appendChild(r),t.getElementsByTagName(s)[0]},z=(e,t,{title:o,hint:n,options:i={},force:a})=>{if(typeof window>"u"||!window?.navigator?.userAgent)return null;const{navigator:s}=window,{userAgent:r}=s,f=w(window.Promise),d=T(r)||C(r),c=!d&&R(r),g=!d&&/firefox/iu.test(r)&&r.split("rv:").length>1?parseInt(r.split("rv:")[1].split(".")[0],10)>18:!1,h=!d&&(f||g);if(!v(e))return p("URL is not valid"),null;const l=M(t);if(!l)return p("Target element cannot be determined"),null;const m=o||/\/([^/]+).pdf/.exec(e)?.[1]||"PDF Viewer";return a?PDFJS_URL?u("pdfjs",l,e,i,m):(l.innerHTML=n.replace(/\[url\]/g,e),p("PDFJS URL is not defined"),null):h||!d?u(c?"iframe":"embed",l,e,i,m):PDFJS_URL?u("pdfjs",l,e,i,m):(l.innerHTML=n.replace(/\[url\]/g,e),p("This browser does not support embedded PDFs"),null)};var E=y({name:"PDF",props:{url:{type:String,required:!0},title:{type:String,default:""},width:{type:[String,Number],default:"100%"},height:{type:[String,Number],default:void 0},ratio:{type:[String,Number],default:16/9},page:{type:[String,Number],default:1},noToolbar:Boolean,zoom:{type:[String,Number],default:100},viewer:Boolean},setup(e){const{el:t,width:o,height:n,resize:i}=$(e),a=L(PDF_LOCALES);return P(()=>{z(I(e.url),t.value,{title:e.title,hint:a.value.hint,options:{page:e.page,noToolbar:e.noToolbar,...e.zoom.toString()==="100"?{}:{zoom:e.zoom}},force:e.viewer}),i()}),()=>D("div",{class:"pdf-viewer-wrapper",ref:t,style:{width:o.value,height:n.value}})}});export{E as default};
//# sourceMappingURL=PDF.js.map
