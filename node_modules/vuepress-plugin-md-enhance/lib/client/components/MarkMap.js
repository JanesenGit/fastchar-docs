import{decodeData as v}from"@vuepress/helper/client";import{useEventListener as g,useDebounceFn as k}from"@vueuse/core";import{defineComponent as y,ref as M,shallowRef as s,onMounted as h,onUnmounted as w,h as o}from"vue";import{LoadingIcon as D}from"vuepress-shared/client";import"../styles/markmap.scss";var b=y({name:"MarkMap",props:{id:{type:String,required:!0},content:{type:String,required:!0}},setup(a){const n=M(!0),i=s(),m=s();let e=null;return g("resize",k(()=>{e?.fit()},100)),h(()=>{Promise.all([import("markmap-lib"),import("markmap-toolbar"),import("markmap-view"),new Promise(r=>setTimeout(r,MARKDOWN_ENHANCE_DELAY))]).then(async([{Transformer:r},{Toolbar:p},{Markmap:l,deriveOptions:d}])=>{const u=new r,{frontmatter:f,root:c}=u.transform(v(a.content));e=l.create(m.value,d(f?.markmap??{}));const{el:t}=p.create(e);e.setData(c),await e.fit(),t.style.position="absolute",t.style.bottom="0.5rem",t.style.right="0.5rem",i.value.append(t),n.value=!1})}),w(()=>{e?.destroy()}),()=>o("div",{class:"markmap-wrapper",ref:i},[o("svg",{ref:m,class:"markmap-svg",id:a.id}),n.value?o(D,{class:"markmap-loading",height:360}):null])}});export{b as default};
//# sourceMappingURL=MarkMap.js.map
